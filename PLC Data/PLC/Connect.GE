(*@PROPERTIES_EX@
TYPE: POU
LOCALE: 0
IEC_LANGUAGE: FBD
PLC_TYPE: independent
PROC_TYPE: independent
*)
(*@KEY@:DESCRIPTION*)

(*@KEY@:END_DESCRIPTION*)
FUNCTION_BLOCK Connect

(*Group:Default*)


VAR_EXTERNAL
	arrRcvBuf :	ARR_TCP_DATA_B_0_999;
	arrSndBuf :	ARR_TCP_DATA_B_0_999;
	IPConnectError :	BOOL;
	IPReceiveError :	BOOL;
	IPSendError :	BOOL;
	SendDone :	BOOL;
	NewDataReceived :	BOOL;
	DeadmanSwitch :	BOOL;
END_VAR


VAR
	IP_USEND_1 :	IP_USEND;
	IP_URCV_1 :	IP_URCV;
	IP_Connect_1 :	IP_CONNECT;
	RS_2 :	RS;
	TP_2 :	TP;
END_VAR


VAR_EXTERNAL
	SendRequest :	BOOL;
END_VAR


VAR
	SR_1 :	SR;
END_VAR


VAR_EXTERNAL
	PLCMODE_RUN :	BOOL;(*PLC status RUN*)
	RTC_SECONDS :	INT;(*System time (seconds)*)
	RTC_MINUTES :	INT;(*System time (minutes)*)
	RTC_HOURS :	INT;(*System time (hours)*)
	RTC_DAY :	INT;(*System time (day)*)
END_VAR


(*@KEY@: WORKSHEET
NAME: Connect
IEC_LANGUAGE: FBD
*)
[GRA]
400 400 0 0 0 0 0 

[LIT]
33
78 82 83 82 0 ""
45 7 115 7 0 ""
45 19 80 19 0 ""
80 19 80 40 0 ""
80 40 115 40 0 ""
80 19 80 11 13 ""
80 11 115 11 0 ""
134 36 150 36 0 ""
167 36 170 36 0 ""
45 82 59 82 0 ""
178 59 180 59 0 ""
180 59 180 65 0 ""
180 65 183 65 0 ""
178 76 180 76 0 ""
180 76 180 69 13 ""
180 69 183 69 0 ""
146 69 154 69 0 ""
154 69 154 63 13 ""
154 63 166 63 0 ""
154 69 154 76 0 ""
154 76 166 76 0 ""
142 69 146 69 0 ""
146 69 146 61 13 ""
146 61 128 61 1 ""
128 61 128 69 0 ""
128 69 129 69 0 ""
41 97 59 97 0 ""
46 72 83 72 0 ""
78 97 83 97 0 ""
77 131 79 131 0 ""
77 121 79 121 0 ""
77 111 79 111 0 ""
77 142 79 142 0 ""

[TET]
38
25 0 43 3 7 6 IP_CONNECT_1
0 10 23 12 4 5 '/PASSIVE /PORT=8000'
15 6 23 8 4 5 TRUE
117 0 132 3 7 6 IP_URCV_1
104 18 115 20 4 5 arrRcvBuf
134 18 145 20 4 3 arrRcvBuf
110 14 115 16 4 5 '1'
117 29 132 32 7 6 IP_USEND_1
110 43 115 45 4 5 '1'
104 47 115 49 4 5 arrSndBuf
134 47 145 49 4 3 arrSndBuf
45 10 60 12 4 3 IPConnectError
134 10 149 12 4 3 IPReceiveError
134 39 147 41 4 3 IPSendError
170 35 181 37 4 3 SendDone
134 6 152 8 4 3 NewDataReceived
83 81 98 83 4 3 arrSndBuf[15]
29 81 45 83 4 5 DeadmanSwitch
152 29 165 32 7 6 RS_2
131 62 140 65 7 6 TP_2
118 72 129 74 4 5 T#100ms
101 35 115 37 4 5 SendRequest
185 58 197 61 7 6 SR_1
199 64 213 66 4 3 SendRequest
152 58 166 60 4 5 SendRequest
152 79 166 81 4 5 SendRequest
35 71 46 73 4 5 BYTE#30
83 71 97 73 4 3 arrSndBuf[0]
25 96 41 98 4 5 PLCMODE_RUN
83 96 98 98 4 3 arrSndBuf[13]
43 110 59 112 4 5 RTC_SECONDS
43 120 59 122 4 5 RTC_MINUTES
45 130 59 132 4 5 RTC_HOURS
79 110 93 112 4 3 arrSndBuf[9]
79 120 94 122 4 3 arrSndBuf[10]
79 130 94 132 4 3 arrSndBuf[11]
48 141 59 143 4 5 RTC_DAY
79 141 94 143 4 3 arrSndBuf[12]

[FBS]
14
589849 524291 43 23 0 0 IP_CONNECT IP_CONNECT_1  
393333 524291 132 25 0 0 IP_URCV IP_URCV_1  
393333 524320 132 52 0 0 IP_USEND IP_USEND_1  
196669 196686 76 86 1 0 BOOL_TO_BYTE @  
524440 262176 165 44 0 0 RS RS_2  
262275 262209 140 77 0 0 TP TP_2  
196776 196663 176 67 1 0 AND @  
196776 196680 176 84 1 0 AND @  
458937 262205 197 73 0 0 SR SR_1  
196669 196701 76 101 1 0 BOOL_TO_BYTE @  
196669 196715 75 115 1 0 INT_TO_BYTE @  
196669 196735 75 135 1 0 INT_TO_BYTE @  
196669 196725 75 125 1 0 INT_TO_BYTE @  
196669 196746 75 146 1 0 INT_TO_BYTE @  

[FPT]
48
25 6 32 8 EN_C 0 0 0 0 4224 0 @ BOOL 
25 10 35 12 PARTNER 0 0 0 0 4224 0 @ STRING 
37 6 43 8 VALID 0 0 0 1 0 4224 @ BOOL 
36 10 43 12 ERROR 0 0 0 1 0 4224 @ BOOL 
35 14 43 16 STATUS 0 0 0 1 0 4224 @ INT 
40 18 43 20 ID 0 0 0 1 0 4224 @ INT 
117 6 124 8 EN_R 0 0 0 0 4224 0 @ BOOL 
117 10 121 12 ID 0 0 0 0 4224 0 @ INT 
117 14 123 16 R_ID 0 0 0 0 4224 0 @ STRING 
127 6 132 8 NDR 0 0 0 1 0 4224 @ BOOL 
125 10 132 12 ERROR 0 0 0 1 0 4224 @ BOOL 
124 14 132 16 STATUS 0 0 0 1 0 4224 @ INT 
117 18 132 20 RD_1 0 0 0 2 128 128 @ ANY 
117 35 123 37 REQ 0 0 0 0 4224 0 @ BOOL 
117 39 121 41 ID 0 0 0 0 4224 0 @ INT 
117 43 123 45 R_ID 0 0 0 0 4224 0 @ STRING 
126 35 132 37 DONE 0 0 0 1 0 4224 @ BOOL 
125 39 132 41 ERROR 0 0 0 1 0 4224 @ BOOL 
124 43 132 45 STATUS 0 0 0 1 0 4224 @ INT 
117 47 132 49 SD_1 0 0 0 2 128 128 @ ANY 
61 81 63 83 IN 0 0 0 0 4736 0 @ BOOL 
75 81 76 83 BOOL_TO_BYTE 0 0 0 1 0 4736 @ BYTE 
152 35 158 37 SET 0 0 0 0 4225 0 @ BOOL 
152 39 161 41 RESET1 0 0 0 0 4225 0 @ BOOL 
161 35 165 37 Q1 0 0 0 1 0 4225 @ BOOL 
131 68 135 70 IN 0 0 0 0 131 0 @ BOOL 
131 72 136 74 PT 0 0 0 0 4226 0 @ TIME 
137 68 140 70 Q 0 0 0 1 0 139 @ BOOL 
136 72 140 74 ET 0 0 0 1 0 4224 @ TIME 
168 58 170 60 IN1 2 0 0 0 1675 0 @ ANY_BIT 
168 62 170 64 IN2 2 0 0 0 1667 0 @ ANY_BIT 
175 58 176 60 OUT 0 0 0 1 0 643 @ ANY_BIT 
168 75 170 77 IN1 2 0 0 0 1665 0 @ ANY_BIT 
168 79 170 81 IN2 2 0 0 0 1665 0 @ ANY_BIT 
175 75 176 77 OUT 0 0 0 1 0 641 @ ANY_BIT 
185 64 192 66 SET1 0 0 0 0 4225 0 @ BOOL 
185 68 193 70 RESET 0 0 0 0 4225 0 @ BOOL 
193 64 197 66 Q1 0 0 0 1 0 4225 @ BOOL 
61 96 63 98 IN 0 0 0 0 4736 0 @ BOOL 
75 96 76 98 BOOL_TO_BYTE 0 0 0 1 0 4736 @ BYTE 
61 110 63 112 IN 0 0 0 0 4736 0 @ INT 
74 110 75 112 INT_TO_BYTE 0 0 0 1 0 4736 @ BYTE 
61 130 63 132 IN 0 0 0 0 4736 0 @ INT 
74 130 75 132 INT_TO_BYTE 0 0 0 1 0 4736 @ BYTE 
61 120 63 122 IN 0 0 0 0 4736 0 @ INT 
74 120 75 122 INT_TO_BYTE 0 0 0 1 0 4736 @ BYTE 
61 141 63 143 IN 0 0 0 0 4736 0 @ INT 
74 141 75 143 INT_TO_BYTE 0 0 0 1 0 4736 @ BYTE 

[AKT]
0

[STT]
0

[TRT]
0

[KOT]
0

[VER]
0

[IBX]
0


(*@KEY@: END_WORKSHEET *)
END_FUNCTION_BLOCK
